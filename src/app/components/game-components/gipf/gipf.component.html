<svg xmlns="http://www.w3.org/2000/svg"
     width="100%" height="auto"
     viewBox="0 0 700 700"
     preserveAspectRatio="xMidYMid meet">
    <style type="text/css">
        .text {
            font: 20 sans-serif;
        }
        .capture {
            stroke-width: 2;
            stroke: yellow;
            fill: none;
        }
        .capture:hover {
            stroke-width: 8;
            stroke: yellow;
            fill: none;
        }
    </style>
    <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7"
                refX="5" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" />
        </marker>
    </defs>

    <g *ngFor="let case of getAllCoords();">
        <g (click)="onClick(case)"
           id="click_{{ case.x }}_{{ case.y }}">
            <polyline [attr.points]="getHexaCoordinates(case)"
                      [ngStyle]="getCaseStyle(case)"
                      stroke-linecap="round"/>
            <circle *ngIf="isPiece(case)"
                    [attr.cx]="getCenter(case).x"
                    [attr.cy]="getCenter(case).y"
                    [attr.r]="getPieceSize()"
                    [ngStyle]="getPieceStyle(case)"/>
        </g>
    </g>


    <g *ngFor="let capture of possibleCaptures; index as i;"
       pointer-events="fill"
       class="capture">
        <g *ngFor="let case of capture.capturedCases;">
            <polyline [attr.points]="getHexaCoordinates(case)"
                      (click)="onClick(case)"
                      stroke-linecap="round" />
        </g>
    </g>

    <g *ngFor="let arrow of arrows;">
        <line [attr.x1]="arrow.x1"
              [attr.y1]="arrow.y1"
              [attr.x2]="arrow.x2"
              [attr.y2]="arrow.y2"
              stroke="#000"
              stroke-width="3"
              marker-end="url(#arrowhead)"
              (click)="onClick(arrow.destination)"/>
    </g>

    <g *ngFor="let player of [0, 1];">
        <text x="410" [attr.y]="30+(getPieceSize()+20)*player" class="text">Pi√®ces du joueur {{player+1}}</text>
        <g *ngFor="let p of getPlayerSidePieces(player);">
            <circle id="piece_{{ player }}_{{ p }}"
                    [attr.cx] = "550+(p * getPieceSize()/3)"
                    [attr.cy]="30+(getPieceSize()+20)*player-5"
                    [attr.r]="getPieceSize()/3"
                    [ngStyle]="getPlayerPieceStyle(player)"/>
        </g>
    </g>
</svg>
